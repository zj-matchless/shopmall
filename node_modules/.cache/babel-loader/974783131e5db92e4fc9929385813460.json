{"ast":null,"code":"import _toConsumableArray from \"D:/Vue/shop-mall/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n// 子组件\nimport HomeSwiper from './childComps/HomeSwiper';\nimport HomeRecommendView from './childComps/HomeRecommendView.vue';\nimport HomeFeatureView from './childComps/HomeFeatureView.vue'; // 公共组件\n\nimport NavBar from '../../components/common/navbar/NavBar.vue';\nimport TabControl from '../../components/content/tabControl/TabControl';\nimport GoodsList from '../../components/content/goods/GoodsList.vue'; // import GoodsListItem from '../../components/content/goods/GoodsListItem.vue'\n\nimport { getHomeMultidata as _getHomeMultidata, getHomeGoods as _getHomeGoods } from \"../../network/home\";\nexport default {\n  name: \"home\",\n  components: {\n    HomeSwiper: HomeSwiper,\n    HomeRecommendView: HomeRecommendView,\n    HomeFeatureView: HomeFeatureView,\n    NavBar: NavBar,\n    TabControl: TabControl,\n    GoodsList: GoodsList\n  },\n  data: function data() {\n    return {\n      banners: [],\n      recommends: [],\n      goods: {\n        'pop': {\n          page: 0,\n          list: []\n        },\n        'new': {\n          page: 0,\n          list: []\n        },\n        'sell': {\n          page: 0,\n          list: []\n        }\n      }\n    };\n  },\n  created: function created() {\n    // 1.请求多个数据\n    this.getHomeMultidata(); //2.请求商品数据\n\n    this.getHomeGoods('pop');\n  },\n  methods: {\n    getHomeMultidata: function getHomeMultidata() {\n      var _this = this;\n\n      _getHomeMultidata().then(function (res) {\n        // console.log(res);\n        _this.banners = res.banner.list;\n        _this.recommends = res.recommend.list;\n      });\n    },\n    getHomeGoods: function getHomeGoods(type) {\n      var _this2 = this;\n\n      var page = this.goods[type].page + 1;\n\n      _getHomeGoods(type, page).then(function (res) {\n        var _this2$goods$type$lis;\n\n        (_this2$goods$type$lis = _this2.goods[type].list).push.apply(_this2$goods$type$lis, _toConsumableArray(res.list));\n\n        _this2.goods[type].page += 1; // console.log(this.goods);\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;AAcA;AACA;AACA;AACA,+D,CAEA;;AACA;AACA;AACA,qE,CACA;;AAGA;AAEA;EACAA,YADA;EAEAC;IACAC,sBADA;IAEAC,oCAFA;IAGAC,gCAHA;IAIAC,cAJA;IAKAC,sBALA;IAMAC;EANA,CAFA;EAUAC,IAVA,kBAUA;IACA;MACAC,WADA;MAEAC,cAFA;MAGAC;QACA;UAAAC;UAAAC;QAAA,CADA;QAEA;UAAAD;UAAAC;QAAA,CAFA;QAGA;UAAAD;UAAAC;QAAA;MAHA;IAHA;EASA,CApBA;EAqBAC,OArBA,qBAqBA;IACA;IACA,wBAFA,CAGA;;IACA;EACA,CA1BA;EA2BAC;IACAC,gBADA,8BACA;MAAA;;MACAA;QACA;QACA;QACA;MACA,CAJA;IAKA,CAPA;IAQAC,YARA,wBAQAC,IARA,EAQA;MAAA;;MACA;;MACAD;QAAA;;QACA;;QACA,6BAFA,CAGA;MACA,CAJA;IAKA;EAfA;AA3BA","names":["name","components","HomeSwiper","HomeRecommendView","HomeFeatureView","NavBar","TabControl","GoodsList","data","banners","recommends","goods","page","list","created","methods","getHomeMultidata","getHomeGoods","type"],"sourceRoot":"src/views/home","sources":["home.vue"],"sourcesContent":["<template>\r\n    <div id=\"home\">\r\n        <nav-bar class=\"home-nav\"><div slot=\"center\">购物街</div></nav-bar>\r\n        <home-swiper :banners=\"banners\"/>\r\n        <home-recommend-view :recommends=\"recommends\"/>\r\n        <home-feature-view/>\r\n        <tab-control :titles=\"['流行','新款','精选']\" class=\"tab-control\"></tab-control>\r\n        <goods-list :goods=\"goods['pop'].list\"/>\r\n\r\n\r\n        <h2 v-for=\"item in 100\" :key=\"item.id\">{{item}}</h2>\r\n    </div>\r\n</template>\r\n<script>\r\n// 子组件\r\nimport HomeSwiper from './childComps/HomeSwiper';\r\nimport HomeRecommendView from './childComps/HomeRecommendView.vue'\r\nimport HomeFeatureView from './childComps/HomeFeatureView.vue'\r\n\r\n// 公共组件\r\nimport NavBar from '../../components/common/navbar/NavBar.vue';\r\nimport TabControl from '../../components/content/tabControl/TabControl'\r\nimport GoodsList from '../../components/content/goods/GoodsList.vue'\r\n// import GoodsListItem from '../../components/content/goods/GoodsListItem.vue'\r\n\r\n\r\nimport {getHomeMultidata, getHomeGoods} from \"../../network/home\";\r\n\r\nexport default {\r\n    name: \"home\",\r\n    components: {\r\n        HomeSwiper,\r\n        HomeRecommendView,\r\n        HomeFeatureView,\r\n        NavBar,\r\n        TabControl,\r\n        GoodsList\r\n    },\r\n    data() {\r\n        return {\r\n            banners: [],\r\n            recommends: [],\r\n            goods: {\r\n                'pop': {page: 0, list: []},\r\n                'new': {page: 0, list: []},\r\n                'sell': {page: 0, list: []},\r\n            }\r\n        }\r\n    },\r\n    created() {\r\n        // 1.请求多个数据\r\n        this.getHomeMultidata()\r\n    //2.请求商品数据\r\n    this.getHomeGoods('pop');\r\n    },\r\n    methods: {\r\n        getHomeMultidata() {\r\n            getHomeMultidata().then(res => {\r\n            // console.log(res);\r\n            this.banners = res.banner.list;\r\n            this.recommends = res.recommend.list;\r\n        })\r\n        },\r\n        getHomeGoods(type) {\r\n            const page = this.goods[type].page + 1\r\n            getHomeGoods(type, page).then(res => {\r\n                this.goods[type].list.push(...res.list)\r\n                this.goods[type].page += 1\r\n                // console.log(this.goods);\r\n            })\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n    #home {\r\n        padding-top: 44px;\r\n    }\r\n    .home-nav {\r\n        position: fixed;\r\n        left: 0;\r\n        right: 0;\r\n        top: 0;\r\n        z-index: 9;\r\n        color: #fff;\r\n        background-color: var(--color-tint);\r\n    }\r\n    .tab-control {\r\n        position: sticky;\r\n        top: 44px;\r\n        background-color: #fff;\r\n    }\r\n</style>"]},"metadata":{},"sourceType":"module"}